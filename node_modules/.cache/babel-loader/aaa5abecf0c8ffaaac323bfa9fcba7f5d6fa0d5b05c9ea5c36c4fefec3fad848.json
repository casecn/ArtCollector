{"ast":null,"code":"var _jsxFileName = \"/Users/cncase/projects/course_work/project_05/UNIV_Art_Collector_React_Starter/src/components/Search.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\n\n/**\n * Don't touch these imports!\n */\nimport { fetchAllCenturies, fetchAllClassifications, fetchQueryResults } from '../api';\nconst Search = props => {\n  _s();\n  // Make sure to destructure setIsLoading and setSearchResults from the props\n  const {\n    setIsLoading,\n    setSearchResults\n  } = props;\n\n  /**\n   * We are at the Search component, a child of app. This has a form, so we need to use useState\n   * for our controlled inputs:\n   */\n  /* centuryList, setCenturyList (default should be an empty array, [])*/\n  const [centuryList, setCenturyList] = useState([]);\n  /* classificationList, setClassificationList (default should be an empty array, [])*/\n\n  const [classificationList, setClassificationList] = useState([]);\n  /* queryString, setQueryString (default should be an empty string, '')*/\n  const [queryString, setQueryString] = useState('');\n  /* century, setCentury (default should be the string 'any')*/\n  const [century, setCentury] = useState('any');\n  /* classification, setClassification (default should be the string 'any')*/\n\n  const [classification, setClassification] = useState('any');\n\n  /**\n   * Inside of useEffect, use Promise.all([]) with fetchAllCenturies and fetchAllClassifications\n   * \n   * In the .then() callback pass the returned lists to setCenturyList and setClassificationList\n   * \n   * Make sure to console.error on caught errors from the API methods.\n   */\n  useEffect(() => {\n    async function fetchCenturyAndClass() {\n      const centuries = await fetchAllCenturies();\n      const classifications = await fetchAllClassifications();\n      return Promise.all([centuries, classifications]);\n    }\n    fetchCenturyAndClass().then(data => {\n      const [centuriesArray, classificationsArray] = data;\n      setCenturyList(centuriesArray);\n      //console.log(centuryList);\n      setClassificationList(classificationsArray);\n    });\n  }, []);\n  const handleQueryChange = event => {\n    setQueryString(event.target.value);\n  };\n  const handleClassificationChange = event => {\n    setClassification(event.target.value);\n  };\n  const handleCenturyChange = event => {\n    setCentury(event.target.value);\n  };\n  const MapCentury = () => {\n    const mapped = centuryList.map(item => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: item.id,\n        value: item.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 14\n        }\n      }, item.name);\n    });\n    return mapped;\n  };\n  const MapClassification = () => {\n    const mapped = classificationList.map(item => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: item.id,\n        value: item.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 7\n        }\n      }, item.name);\n    });\n    return mapped;\n  };\n  /**\n   * This is a form element, so we need to bind an onSubmit handler to it which:\n   * \n   * calls event.preventDefault()\n   * calls setIsLoading, set it to true\n   * \n   * then, in a try/catch/finally block:\n   **/\n  return /*#__PURE__*/React.createElement(\"form\", {\n    id: \"search\",\n    onSubmit: async event => {\n      // write code here\n      event.preventDefault();\n      setIsLoading = true;\n      try {\n        /*try to:\n        * - get the results from fetchQueryResults({ century, classification, queryString })\n        * - pass them to setSearchResults*/\n        //console.log(\"Hi I'm here!\");\n        const queryResults = await fetchQueryResults({\n          century,\n          classification,\n          queryString\n        }).then(data => {\n          setSearchResults(data);\n        });\n      } catch (errorObject) {\n        console.error(`Search Error:${errorObject}`); //catch: error to console.error\n      } finally {\n        setIsLoading(false); // finally: call setIsLoading, set it to false\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"keywords\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Query\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"keywords\",\n    type: \"text\",\n    placeholder: \"enter keywords...\",\n    value: queryString,\n    onChange: handleQueryChange /* this should update the value of the query string */,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"select-classification\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"Classification \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"classification-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 63\n    }\n  }, \"(\", classificationList === null || classificationList === void 0 ? void 0 : classificationList.length, \")\")), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"classification\",\n    id: \"select-classification\",\n    value: classification /* this should be the classification */,\n    onChange: handleClassificationChange /* this should update the value of the classification */,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"any\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"Any\"), /*#__PURE__*/React.createElement(MapClassification, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"select-century\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"Century \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"century-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 49\n    }\n  }, \"(\", centuryList === null || centuryList === void 0 ? void 0 : centuryList.length, \")\")), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"century\",\n    id: \"select-century\",\n    value: century /* this should be the century */,\n    onChange: handleCenturyChange /* this should update the value of the century */,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"any\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Any\"), \"console.log(centuryList)\", /*#__PURE__*/React.createElement(MapCentury, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, \"SEARCH\"));\n};\n_s(Search, \"/3LTcD+DR1MIBxmqxAKgP5zWaaE=\");\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useEffect","useState","fetchAllCenturies","fetchAllClassifications","fetchQueryResults","Search","props","setIsLoading","setSearchResults","centuryList","setCenturyList","classificationList","setClassificationList","queryString","setQueryString","century","setCentury","classification","setClassification","fetchCenturyAndClass","centuries","classifications","Promise","all","then","data","centuriesArray","classificationsArray","handleQueryChange","event","target","value","handleClassificationChange","handleCenturyChange","MapCentury","mapped","map","item","id","name","MapClassification","preventDefault","queryResults","errorObject","console","error","length"],"sources":["/Users/cncase/projects/course_work/project_05/UNIV_Art_Collector_React_Starter/src/components/Search.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\n/**\n * Don't touch these imports!\n */\nimport { \n  fetchAllCenturies,\n  fetchAllClassifications,\n  fetchQueryResults\n} from '../api';\n\nconst Search = (props) => {\n  // Make sure to destructure setIsLoading and setSearchResults from the props\n  const { setIsLoading, setSearchResults } = props;\n\n  /**\n   * We are at the Search component, a child of app. This has a form, so we need to use useState\n   * for our controlled inputs:\n   */ \n   /* centuryList, setCenturyList (default should be an empty array, [])*/\n  const [ centuryList, setCenturyList ] = useState([]);\n   /* classificationList, setClassificationList (default should be an empty array, [])*/\n  \n  \n  const [ classificationList, setClassificationList ] = useState([]);\n   /* queryString, setQueryString (default should be an empty string, '')*/\n   const [ queryString, setQueryString ] = useState('');\n   /* century, setCentury (default should be the string 'any')*/\n   const [ century, setCentury ] = useState('any');\n   /* classification, setClassification (default should be the string 'any')*/\n\n   const [ classification, setClassification ] = useState('any');\n\n  /**\n   * Inside of useEffect, use Promise.all([]) with fetchAllCenturies and fetchAllClassifications\n   * \n   * In the .then() callback pass the returned lists to setCenturyList and setClassificationList\n   * \n   * Make sure to console.error on caught errors from the API methods.\n   */\n  useEffect(() => \n  {\n    async function fetchCenturyAndClass () {\n    \n      const centuries = await fetchAllCenturies();\n      const classifications = await fetchAllClassifications();\n\n      return Promise.all([centuries, classifications])\n      }\n\n  fetchCenturyAndClass()\n      .then((data)=>\n        {\n        const [centuriesArray, classificationsArray] = data\n        setCenturyList(centuriesArray);\n        //console.log(centuryList);\n        setClassificationList(classificationsArray);\n        })\n      \n  }, []);\n\n  const handleQueryChange = (event) => {\n    setQueryString(event.target.value)\n  }\n\n  const handleClassificationChange = (event) => {\n      setClassification(event.target.value)\n  }\n\n  const handleCenturyChange = (event) => {\n      setCentury(event.target.value)\n  }\n  const MapCentury = () => {\n    const mapped = centuryList.map((item) => {\n      return <option key={item.id} value={item.name}>{item.name}</option>\n  })\n   return mapped;\n  }\n  const MapClassification = () => {\n    const mapped = classificationList.map((item) => {\n       return(\n      <option key={item.id} value={item.name}>{item.name}</option>\n    )\n    })\n    return mapped;\n  }\n  /**\n   * This is a form element, so we need to bind an onSubmit handler to it which:\n   * \n   * calls event.preventDefault()\n   * calls setIsLoading, set it to true\n   * \n   * then, in a try/catch/finally block:\n   **/\n  return <form id=\"search\" onSubmit={async (event) => {\n      // write code here\n      event.preventDefault();\n      setIsLoading = true;\n      try \n      {\n        /*try to:\n        * - get the results from fetchQueryResults({ century, classification, queryString })\n        * - pass them to setSearchResults*/\n        //console.log(\"Hi I'm here!\");\n        const queryResults = await fetchQueryResults({century, classification, queryString})\n        .then((data) => { \n        setSearchResults(data) })\n      }\n      catch (errorObject){\n        console.error(`Search Error:${errorObject}`); //catch: error to console.error\n      }\n      finally {\n        setIsLoading(false); // finally: call setIsLoading, set it to false\n      }\n    }}>\n      <fieldset>\n        <label htmlFor=\"keywords\">Query</label>\n        <input \n          id=\"keywords\" \n          type=\"text\" \n          placeholder=\"enter keywords...\" \n          value={queryString} \n          onChange={handleQueryChange/* this should update the value of the query string */}/>\n      </fieldset>\n      <fieldset>\n        <label htmlFor=\"select-classification\">Classification <span className=\"classification-count\">({ classificationList?.length })</span></label>\n        <select \n          name=\"classification\"\n          id=\"select-classification\"\n          value={classification/* this should be the classification */} \n          onChange={handleClassificationChange/* this should update the value of the classification */}>\n          <option value=\"any\">Any</option>\n          <MapClassification />\n          {/* map over the classificationList, return an <option /> */}\n        </select>\n      </fieldset>\n      <fieldset>\n        <label htmlFor=\"select-century\">Century <span className=\"century-count\">({ centuryList?.length })</span></label>\n        <select \n          name=\"century\" \n          id=\"select-century\"\n          value={century/* this should be the century */} \n          onChange={handleCenturyChange/* this should update the value of the century */}>\n          <option value=\"any\">Any</option>\n          console.log(centuryList)\n          <MapCentury />\n                   \n          {/*map over the centuryList, return an <option /> */}\n        </select>\n      </fieldset>\n      <button>SEARCH</button>\n    </form>\n}\n\nexport default Search;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}